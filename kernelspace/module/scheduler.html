<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>UMS Scheduler &mdash; Linux User-Mode Scheduling v1.0.0 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="UMS Worker" href="worker.html" />
    <link rel="prev" title="UMS Completion List" href="complist.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> Linux User-Mode Scheduling
          </a>
              <div class="version">
                v1.0.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Building</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../userspace/index.html">Userspace library documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Kernel module documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../uapi.html">uAPI</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../module.html">Module internals</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="module_lifecycle.html">Module lifecycle</a></li>
<li class="toctree-l3"><a class="reference internal" href="module_diagram.html">Module diagram</a></li>
<li class="toctree-l3"><a class="reference internal" href="core.html">Core structures and functionalities</a></li>
<li class="toctree-l3"><a class="reference internal" href="device.html">UMS Device</a></li>
<li class="toctree-l3"><a class="reference internal" href="context.html">UMS Context</a></li>
<li class="toctree-l3"><a class="reference internal" href="complist.html">UMS Completion List</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">UMS Scheduler</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#defines">Defines</a></li>
<li class="toctree-l4"><a class="reference internal" href="#structs">Structs</a></li>
<li class="toctree-l4"><a class="reference internal" href="#functions">Functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="worker.html">UMS Worker</a></li>
<li class="toctree-l3"><a class="reference internal" href="proc.html">Procfs</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../tools.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../benchmarks.html">Benchmarks</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Linux User-Mode Scheduling</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">Kernel module documentation</a> &raquo;</li>
          <li><a href="../module.html">Module internals</a> &raquo;</li>
      <li>UMS Scheduler</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/kernelspace/module/scheduler.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="ums-scheduler">
<h1>UMS Scheduler<a class="headerlink" href="#ums-scheduler" title="Permalink to this headline"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline"></a></h2>
<p>The life cycle of a UMS scheduler is bounded to the process that opens the UMS
device and it is represented by the <a class="reference internal" href="#c.ums_scheduler" title="ums_scheduler"><code class="xref c c-struct docutils literal notranslate"><span class="pre">ums_scheduler</span></code></a> structure.
Once created, it is stored inside the pool of schedulers pointed by
<a class="reference internal" href="device.html#c.ums_data.schedulers" title="ums_data.schedulers"><code class="xref c c-var docutils literal notranslate"><span class="pre">ums_data.schedulers</span></code></a>.
The kernel <code class="docutils literal notranslate"><span class="pre">rhashtable</span></code> structure has been choosen for representing the
schedulers pool since the number of UMS schedulers that are going to be created
isn’t known in advance. In this way the size of the hashtable will be
automatically adjusted providing better performances.
Every UMS scheduler is indexed inside the pool by its
<a class="reference internal" href="#c.ums_scheduler.context" title="ums_scheduler.context"><code class="xref c c-var docutils literal notranslate"><span class="pre">ums_scheduler.context</span></code></a>.</p>
<p>UMS scheduling activities are notified to userland process by means of
<a class="reference internal" href="../uapi/definitions.html#c.IOCTL_UMS_SCHED_DQEVENT" title="IOCTL_UMS_SCHED_DQEVENT"><code class="xref c c-macro docutils literal notranslate"><span class="pre">IOCTL_UMS_SCHED_DQEVENT</span></code></a> <code class="docutils literal notranslate"><span class="pre">ioctl</span></code> calls.
After a userland thread converts itself to UMS scheduling thread a
<a class="reference internal" href="#c.ums_event_node" title="ums_event_node"><code class="xref c c-struct docutils literal notranslate"><span class="pre">ums_event_node</span></code></a> of type
<a class="reference internal" href="../uapi/definitions.html#c.ums_sched_event_type_e.SCHEDULER_STARTUP" title="ums_sched_event_type_e.SCHEDULER_STARTUP"><code class="xref c c-var docutils literal notranslate"><span class="pre">ums_sched_event_type_e.SCHEDULER_STARTUP</span></code></a> is posted to the newly
created scheduler’s <a class="reference internal" href="#c.ums_scheduler.event_q" title="ums_scheduler.event_q"><code class="xref c c-member docutils literal notranslate"><span class="pre">ums_scheduler.event_q</span></code></a>; when an UMS worker
thread yields or terminates a <a class="reference internal" href="#c.ums_event_node" title="ums_event_node"><code class="xref c c-struct docutils literal notranslate"><span class="pre">ums_event_node</span></code></a> of type
<a class="reference internal" href="../uapi/definitions.html#c.ums_sched_event_type_e.THREAD_YIELD" title="ums_sched_event_type_e.THREAD_YIELD"><code class="xref c c-var docutils literal notranslate"><span class="pre">ums_sched_event_type_e.THREAD_YIELD</span></code></a> or
<a class="reference internal" href="../uapi/definitions.html#c.ums_sched_event_type_e.THREAD_TERMINATED" title="ums_sched_event_type_e.THREAD_TERMINATED"><code class="xref c c-var docutils literal notranslate"><span class="pre">ums_sched_event_type_e.THREAD_TERMINATED</span></code></a> is posted to the scheduler’s
event queue.</p>
<p>Every <a class="reference internal" href="#c.ums_event_node" title="ums_event_node"><code class="xref c c-struct docutils literal notranslate"><span class="pre">ums_event_node</span></code></a> is allocated by a dedicated slab cache in
order to speed up allocation time. The dedicated slab cache is created when the
UMS module is loaded by calling <a class="reference internal" href="#c.ums_scheduling_cache_create" title="ums_scheduling_cache_create"><code class="xref c c-func docutils literal notranslate"><span class="pre">ums_scheduling_cache_create()</span></code></a> and
destroied when the module is unloaded by calling
<a class="reference internal" href="#c.ums_scheduling_cache_destroy" title="ums_scheduling_cache_destroy"><code class="xref c c-func docutils literal notranslate"><span class="pre">ums_scheduling_cache_destroy()</span></code></a>.</p>
<p>When a UMS scheduler is created it is registered to the dedicated UMS procfs
at <code class="file docutils literal notranslate"><span class="pre">/proc/ums/&lt;pid&gt;/schedulers/&lt;scheduler-pid&gt;</span></code>, where <code class="docutils literal notranslate"><span class="pre">&lt;pid&gt;</span></code> is the
PID of the process that opens the UMS device and <code class="docutils literal notranslate"><span class="pre">&lt;scheduler-pid&gt;</span></code> is the PID
of the UMS scheduler.
Once a UMS scheduler terminates it is unregistered from the UMS procfs.</p>
<p>For every UMS worker that is dequeued by a UMS scheduler from its UMS
completion list a symlink is created inside
<code class="file docutils literal notranslate"><span class="pre">/proc/ums/&lt;pid&gt;/schedulers/&lt;scheduler-pid&gt;/workers</span></code> folder and it is
subsequently deleted when the UMS scheduler executes one of them.
In this way at any time the
<code class="file docutils literal notranslate"><span class="pre">/proc/ums/&lt;pid&gt;/schedulers/&lt;scheduler-pid&gt;/workers</span></code> folder represents
the list of UMS workers that an UMS scheduler is owning.</p>
</section>
<section id="defines">
<h2>Defines<a class="headerlink" href="#defines" title="Permalink to this headline"></a></h2>
<dl class="c macro">
<dt class="sig sig-object c" id="c.EVENT_ADD_HEAD">
<span class="target" id="scheduler_8h_1add7528e5028cd3423e7b2e22e4b59355"></span><span class="sig-name descname"><span class="n"><span class="pre">EVENT_ADD_HEAD</span></span></span><a class="headerlink" href="#c.EVENT_ADD_HEAD" title="Permalink to this definition"></a><br /></dt>
<dd><p>Add a UMS scheduling event to the head of the event queue </p>
</dd></dl>

<dl class="c macro">
<dt class="sig sig-object c" id="c.EVENT_ADD_TAIL">
<span class="target" id="scheduler_8h_1a589cbcee5e64f8994e75d76809b159b0"></span><span class="sig-name descname"><span class="n"><span class="pre">EVENT_ADD_TAIL</span></span></span><a class="headerlink" href="#c.EVENT_ADD_TAIL" title="Permalink to this definition"></a><br /></dt>
<dd><p>Add a UMS scheduling event to the tail of the event queue </p>
</dd></dl>

</section>
<section id="structs">
<h2>Structs<a class="headerlink" href="#structs" title="Permalink to this headline"></a></h2>
<dl class="c struct">
<dt class="sig sig-object c" id="c.ums_scheduler">
<span class="target" id="structums__scheduler"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ums_scheduler</span></span></span><a class="headerlink" href="#c.ums_scheduler" title="Permalink to this definition"></a><br /></dt>
<dd><p>UMS scheduler struct </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.ums_scheduler.context">
<span class="target" id="structums__scheduler_1a9e1b6d4d121db6836446ed589eb7b941"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="context.html#c.ums_context" title="ums_context"><span class="n"><span class="pre">ums_context</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">context</span></span></span><a class="headerlink" href="#c.ums_scheduler.context" title="Permalink to this definition"></a><br /></dt>
<dd><p>scheduler context </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.ums_scheduler.complist">
<span class="target" id="structums__scheduler_1afedfd098d7a344f1cdef1acd813f2291"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="complist.html#c.ums_complist" title="ums_complist"><span class="n"><span class="pre">ums_complist</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">complist</span></span></span><a class="headerlink" href="#c.ums_scheduler.complist" title="Permalink to this definition"></a><br /></dt>
<dd><p>scheduler completion list </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.ums_scheduler.event_q">
<span class="target" id="structums__scheduler_1ac7cbeb0fe8d7386251e2f612342b721f"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">list_head</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">event_q</span></span></span><a class="headerlink" href="#c.ums_scheduler.event_q" title="Permalink to this definition"></a><br /></dt>
<dd><p>scheduler event queue list </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.ums_scheduler.lock">
<span class="target" id="structums__scheduler_1ae1871c2d33d24ec9db51ad8a63799482"></span><span class="n"><span class="pre">spinlock_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">lock</span></span></span><a class="headerlink" href="#c.ums_scheduler.lock" title="Permalink to this definition"></a><br /></dt>
<dd><p>scheduler spinlock </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.ums_scheduler.sched_wait_q">
<span class="target" id="structums__scheduler_1ac8f0b00b3f06ade401dcb6f502af41e5"></span><span class="n"><span class="pre">wait_queue_head_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">sched_wait_q</span></span></span><a class="headerlink" href="#c.ums_scheduler.sched_wait_q" title="Permalink to this definition"></a><br /></dt>
<dd><p>scheduler wait queue </p>
</dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.ums_scheduler.dirs">
<span class="target" id="structums__scheduler_1a07d787bcfb4903974773e7519eff6ce5"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="proc.html#c.ums_scheduler_proc_dirs" title="ums_scheduler_proc_dirs"><span class="n"><span class="pre">ums_scheduler_proc_dirs</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dirs</span></span></span><a class="headerlink" href="#c.ums_scheduler.dirs" title="Permalink to this definition"></a><br /></dt>
<dd><p>scheduler procfs dirs </p>
</dd></dl>

</div>
</dd></dl>

<dl class="c struct">
<dt class="sig sig-object c" id="c.ums_event_node">
<span class="target" id="structums__event__node"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ums_event_node</span></span></span><a class="headerlink" href="#c.ums_event_node" title="Permalink to this definition"></a><br /></dt>
<dd><p>UMS scheduler event node. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="c var">
<dt class="sig sig-object c" id="c.ums_event_node.event">
<span class="target" id="structums__event__node_1a135337d514160df261c2da8a22b1b6fa"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../uapi/definitions.html#c.ums_sched_event" title="ums_sched_event"><span class="n"><span class="pre">ums_sched_event</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">event</span></span></span><a class="headerlink" href="#c.ums_event_node.event" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

<dl class="c var">
<dt class="sig sig-object c" id="c.ums_event_node.list">
<span class="target" id="structums__event__node_1ac58fe0fd898915cb2a823f9f9a80cfaa"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">list_head</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">list</span></span></span><a class="headerlink" href="#c.ums_event_node.list" title="Permalink to this definition"></a><br /></dt>
<dd></dd></dl>

</div>
</dd></dl>

</section>
<section id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline"></a></h2>
<dl class="c function">
<dt class="sig sig-object c" id="c.ums_scheduling_cache_create">
<span class="target" id="scheduler_8h_1abcaf225c5f6165742023c8c31a85eeb3"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ums_scheduling_cache_create</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.ums_scheduling_cache_create" title="Permalink to this definition"></a><br /></dt>
<dd><p>Create a slab cache for allocating UMS scheduling events. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><ul class="simple">
<li><p>0 - OK</p></li>
<li><p>-ENOMEM - No memory available </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.ums_scheduling_cache_destroy">
<span class="target" id="scheduler_8h_1ae9e7c238130bc4a38abad6d9bca31423"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ums_scheduling_cache_destroy</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.ums_scheduling_cache_destroy" title="Permalink to this definition"></a><br /></dt>
<dd><p>Destroy the slab cache for UMS scheduling events. </p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.enter_ums_scheduler_mode">
<span class="target" id="scheduler_8h_1a4e10e7d7390bd6abd8a6db70e135c02a"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">enter_ums_scheduler_mode</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="device.html#c.ums_data" title="ums_data"><span class="n"><span class="pre">ums_data</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../uapi/definitions.html#c.enter_ums_mode_args" title="enter_ums_mode_args"><span class="n"><span class="pre">enter_ums_mode_args</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.enter_ums_scheduler_mode" title="Permalink to this definition"></a><br /></dt>
<dd><p>Enter UMS scheduling mode. </p>
<p>Creates a UMS scheduler and send a <a class="reference internal" href="../uapi/definitions.html#ums__ioctl_8h_1ac21bc03403f3a6bbdc79457b28bb4c1da735846780a2c540febfe1800be0c55d1"><span class="std std-ref">SCHEDULER_STARTUP</span></a> event to it.</p>
<p><strong>Context</strong>: Process context. May sleep. Takes and releases the RCU lock.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – <strong>[in]</strong> pointer to the UMS data </p></li>
<li><p><strong>args</strong> – <strong>[in]</strong> userspace pointer for args</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>0 - OK</p></li>
<li><p>-ENOMEM - No memory available</p></li>
<li><p>-EINVAL - Invalid UMS completion list arg </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.alloc_ums_event">
<span class="target" id="scheduler_8h_1ad593c3ab2fd5dc3ada247a7e33aabac3"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.ums_event_node" title="ums_event_node"><span class="n"><span class="pre">ums_event_node</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">alloc_ums_event</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.alloc_ums_event" title="Permalink to this definition"></a><br /></dt>
<dd><p>Allocate an UMS scheduling event from the dedicated slab cache. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>the UMS scheduling event </p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.free_ums_event">
<span class="target" id="scheduler_8h_1a70cfdd817780be4cbce34afeca30e681"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">free_ums_event</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.ums_event_node" title="ums_event_node"><span class="n"><span class="pre">ums_event_node</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">event</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.free_ums_event" title="Permalink to this definition"></a><br /></dt>
<dd><p>Deallocate the UMS scheduling event. </p>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.enqueue_ums_sched_event">
<span class="target" id="scheduler_8h_1a39af52f429ba85ec97bac4f87100e360"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">enqueue_ums_sched_event</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.ums_scheduler" title="ums_scheduler"><span class="n"><span class="pre">ums_scheduler</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">scheduler</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.ums_event_node" title="ums_event_node"><span class="n"><span class="pre">ums_event_node</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">event</span></span>, <span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">flags</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.enqueue_ums_sched_event" title="Permalink to this definition"></a><br /></dt>
<dd><p>Enqueue the UMS scheduling event to the UMS scheduler queue. </p>
<p><strong>Context</strong>: Process context. Takes and releases <code class="docutils literal notranslate"><span class="pre">scheduler-&gt;lock</span></code> </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scheduler</strong> – <strong>[in]</strong> pointer to the UMS scheduler </p></li>
<li><p><strong>event</strong> – <strong>[in]</strong> pointer to the UMS scheduling event </p></li>
<li><p><strong>flags</strong> – <strong>[in]</strong> flags specifying how to add the event (can be one from <a class="reference internal" href="#scheduler_8h_1add7528e5028cd3423e7b2e22e4b59355"><span class="std std-ref">EVENT_ADD_HEAD</span></a> or <a class="reference internal" href="#scheduler_8h_1a589cbcee5e64f8994e75d76809b159b0"><span class="std std-ref">EVENT_ADD_TAIL</span></a>) </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.ums_scheduler_destroy">
<span class="target" id="scheduler_8h_1a6daf156802e6b4d1021eb9b9e4732fc6"></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">ums_scheduler_destroy</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.ums_scheduler" title="ums_scheduler"><span class="n"><span class="pre">ums_scheduler</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">sched</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.ums_scheduler_destroy" title="Permalink to this definition"></a><br /></dt>
<dd><p>Destroy the UMS scheduler and every UMS scheduling event associated with it. </p>
<p><strong>Context</strong>: Process context. Takes and releases <code class="docutils literal notranslate"><span class="pre">scheduler-&gt;lock</span></code> </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>sched</strong> – <strong>[in]</strong> pointer to the UMS scheduler </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.exec_ums_context">
<span class="target" id="scheduler_8h_1a90708612fc84b4d8593a992c321539d3"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">exec_ums_context</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="device.html#c.ums_data" title="ums_data"><span class="n"><span class="pre">ums_data</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span>, <span class="n"><span class="pre">pid_t</span></span><span class="w"> </span><span class="n"><span class="pre">worker_pid</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.exec_ums_context" title="Permalink to this definition"></a><br /></dt>
<dd><p>Execute a UMS worker context. </p>
<p>Suspend the UMS scheduler switching its context with the UMS worker’s one.</p>
<p><strong>Context</strong>: Process context. May sleep. Takes and releases the RCU lock.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> – <strong>[in]</strong> pointer to the UMS data </p></li>
<li><p><strong>worker_pid</strong> – <strong>[in]</strong> pid of the UMS worker</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>0 - OK</p></li>
<li><p>-ESRCH - Bad worker pid or bad UMS calling thread </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="complist.html" class="btn btn-neutral float-left" title="UMS Completion List" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="worker.html" class="btn btn-neutral float-right" title="UMS Worker" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Arella Matteo.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>